(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16f7c0f7"],{"0c6d":function(e,t,l){"use strict";l("d3b7");var a,o=l("bc3a"),r=l.n(o),i=l("5c96"),s=l("4360"),n=l("5fc1"),c=void 0;a="http://leju.bufan.cloud";var m=r.a.create({baseURL:a,timeout:5e3});m.interceptors.request.use((function(e){return Object(n["a"])()&&(e.headers["token"]=Object(n["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),m.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(i["Message"])({message:t.message||"Error",type:"error",duration:5e3}),20002===t.code&&(Object(n["c"])(),Object(n["d"])(),c.$router.push("/login")),50008!==t.code&&50012!==t.code&&50014!==t.code||i["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){s["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=m},a434:function(e,t,l){"use strict";var a=l("23e7"),o=l("23cb"),r=l("a691"),i=l("50c4"),s=l("7b0b"),n=l("65f0"),c=l("8418"),m=l("1dde"),u=l("ae40"),f=m("splice"),d=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!d},{splice:function(e,t){var l,a,m,u,f,d,g=s(this),w=i(g.length),k=o(e,w),y=arguments.length;if(0===y?l=a=0:1===y?(l=0,a=w-k):(l=y-2,a=b(p(r(t),0),w-k)),w+l-a>h)throw TypeError(v);for(m=n(g,a),u=0;u<a;u++)f=k+u,f in g&&c(m,u,g[f]);if(m.length=a,l<a){for(u=k;u<w-a;u++)f=u+a,d=u+l,f in g?g[d]=g[f]:delete g[d];for(u=w;u>w-a+l;u--)delete g[u-1]}else if(l>a)for(u=w-a;u>k;u--)f=u+a-1,d=u+l-1,f in g?g[d]=g[f]:delete g[d];for(u=0;u<l;u++)g[u+k]=arguments[u+2];return g.length=w-a+l,m}})},b47c:function(e,t,l){"use strict";l("c71c")},c71c:function(e,t,l){},f92f:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"content"},[l("el-card",{attrs:{shadow:"never"}},[l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:6}},[l("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){e.dialogVisibleTwo=!0}}},[e._v("初始化菜单")]),l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增菜单")])],1)],1),l("el-dialog",{attrs:{title:"编辑菜单",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[l("el-col",[l("span",{staticStyle:{"font-weight":"700","margin-right":"20px"}},[e._v("菜单类型")]),l("el-radio",{attrs:{label:1},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("顶级目录")]),l("el-radio",{attrs:{label:2},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("菜单")]),l("el-radio",{attrs:{label:3},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("按钮")])],1)],1),1===e.radio?l("div",{staticClass:"first-box"},[l("el-form",{attrs:{model:e.form,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"路由名称"}},[l("el-input",{attrs:{placeholder:"前端路由name唯一"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),l("el-form-item",{attrs:{label:"路径"}},[l("el-input",{attrs:{placeholder:"前端路由path忽略父节点路径"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),l("el-form-item",{attrs:{label:"组建路径"}},[l("el-input",{attrs:{placeholder:"前端路由组建路径,比如@/views/foo/foo.vue"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1),l("el-form-item",{attrs:{label:"重定向"}},[l("el-input",{attrs:{placeholder:"redirect"},model:{value:e.form.redirect,callback:function(t){e.$set(e.form,"redirect",t)},expression:"form.redirect"}})],1),l("el-form-item",{attrs:{label:"排序"}},[l("el-input-number",{attrs:{placeholder:"越小越靠前"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"是否隐藏"}},[l("el-radio",{attrs:{label:"false"},model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[e._v("是")]),l("el-radio",{attrs:{label:"true"},model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[e._v("否")])],1)],1),l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"是否展开"}},[l("el-radio",{attrs:{label:"true"},model:{value:e.form.alwaysShow,callback:function(t){e.$set(e.form,"alwaysShow",t)},expression:"form.alwaysShow"}},[e._v("是")]),l("el-radio",{attrs:{label:"false"},model:{value:e.form.alwaysShow,callback:function(t){e.$set(e.form,"alwaysShow",t)},expression:"form.alwaysShow"}},[e._v("否")])],1)],1)],1),l("el-form-item",{attrs:{label:"meta属性"}},e._l(e.meta,(function(t,a){return l("el-row",{key:a,staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[l("el-col",{attrs:{span:9}},[l("el-input",{attrs:{clearable:"",placeholder:""},model:{value:t.key,callback:function(l){e.$set(t,"key",l)},expression:"item.key"}})],1),l("el-col",{attrs:{span:9}},[l("el-input",{attrs:{clearable:"",placeholder:""},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"item.value"}})],1),l("el-col",{attrs:{span:4}},[l("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"20px"},on:{click:e.addRow}}),l("i",{staticClass:"el-icon-minus",on:{click:function(t){return e.cutRow(a)}}})])],1)})),1)],1)],1):e._e(),2===e.radio?l("div",{staticClass:"first-box"},[l("el-form",{attrs:{model:e.form,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"上级菜单"}},[l("el-cascader",{attrs:{options:e.resourceData,props:{checkStrictly:!0,label:"title",value:"id"},clearable:""},on:{change:e.getID}})],1),l("el-form-item",{attrs:{label:"路由名称"}},[l("el-input",{attrs:{placeholder:"前端路由path忽略父节点路径"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),l("el-form-item",{attrs:{label:"路径"}},[l("el-input",{attrs:{placeholder:"前端路由组建路径,比如@/views/foo/foo.vue"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),l("el-form-item",{attrs:{label:"组建路径"}},[l("el-input",{attrs:{placeholder:"redirect"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1),l("el-form-item",{attrs:{label:"重定向"}},[l("el-input",{attrs:{placeholder:"redirect"},model:{value:e.form.redirect,callback:function(t){e.$set(e.form,"redirect",t)},expression:"form.redirect"}})],1),l("el-form-item",{attrs:{label:"排序"}},[l("el-input-number",{attrs:{placeholder:"越小越靠前"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"是否隐藏"}},[l("el-radio",{attrs:{label:"false"},model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[e._v("是")]),l("el-radio",{attrs:{label:"true"},model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[e._v("否")])],1)],1),l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"是否展开"}},[l("el-radio",{attrs:{label:"true"},model:{value:e.form.alwaysShow,callback:function(t){e.$set(e.form,"alwaysShow",t)},expression:"form.alwaysShow"}},[e._v("是")]),l("el-radio",{attrs:{label:"false"},model:{value:e.form.alwaysShow,callback:function(t){e.$set(e.form,"alwaysShow",t)},expression:"form.alwaysShow"}},[e._v("否")])],1)],1)],1),l("el-form-item",{attrs:{label:"meta属性"}},e._l(e.meta,(function(t,a){return l("el-row",{key:a,staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[l("el-col",{attrs:{span:9}},[l("el-input",{attrs:{clearable:"",placeholder:""},model:{value:t.key,callback:function(l){e.$set(t,"key",l)},expression:"item.key"}})],1),l("el-col",{attrs:{span:9}},[l("el-input",{attrs:{clearable:"",placeholder:""},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"item.value"}})],1),l("el-col",{attrs:{span:4}},[l("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"20px"},on:{click:e.addRow}}),l("i",{staticClass:"el-icon-minus",on:{click:function(t){return e.cutRow(a)}}})])],1)})),1)],1)],1):e._e(),3===e.radio?l("div",{staticClass:"first-box"},[l("el-form",{attrs:{model:e.form,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"所在页面"}},[l("el-cascader",{attrs:{options:e.resourceData,props:{checkStrictly:!0,label:"title",value:"id"},clearable:""},on:{change:e.getIDlast}})],1),l("el-form-item",{attrs:{label:"按钮名称"}},[l("el-input",{attrs:{placeholder:"按钮名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"排序"}},[l("el-input-number",{model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"层级"}},[l("el-input-number",{model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}})],1)],1)],1),l("el-form-item",{attrs:{label:"权限标识"}},[l("el-input",{attrs:{rows:"3",type:"textArea",placeholder:""},model:{value:e.form.permissionValue,callback:function(t){e.$set(e.form,"permissionValue",t)},expression:"form.permissionValue"}})],1)],1)],1):e._e(),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.savePre}},[e._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"初始化菜单",visible:e.dialogVisibleTwo,width:"40%"},on:{"update:visible":function(t){e.dialogVisibleTwo=t}}},[l("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"请谨慎操作! 初始化菜单会覆盖之前记录!",type:"warning"}}),l("el-tree",{attrs:{data:e.resourceData,props:{label:"title"}}}),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisibleTwo=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.resetMenus}},[e._v("确 定")])],1)],1),l("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[l("el-col",[l("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.resourceData,"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[l("el-table-column",{attrs:{prop:"title",label:"菜单名称",sortable:"",width:"180"}}),l("el-table-column",{attrs:{align:"center",prop:"icon",label:"图标",sortable:"",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("i",{class:e.row.icon})]}}])}),l("el-table-column",{attrs:{align:"center",prop:"level",label:"等级"}}),l("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序"}}),l("el-table-column",{attrs:{align:"center",prop:"path",label:"路由"}}),l("el-table-column",{attrs:{align:"center",prop:"component",label:"组建路径"}}),l("el-table-column",{attrs:{align:"center",prop:"status",label:"是否可用"}}),l("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}})],1)],1)],1)],1)],1)},o=[],r=(l("a434"),l("fb6a"),l("d3b7"),l("159b"),l("e9c4"),l("b0c0"),l("0c6d"));function i(){return Object(r["a"])({url:"/admin/sysAuth/permission/findAllPermissions"})}function s(e){return Object(r["a"])({url:"/admin/sysAuth/permission/save",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/admin/sysAuth/permission/update",method:"put",data:e})}var c=l("5c96"),m={data:function(){return{resourceData:[],form:{},meta:[{key:"title",value:""},{key:"icon",value:"el-icon-menu"}],title:"title",icon:"icon",dialogVisible:!1,dialogVisibleTwo:!1,radio:1,pidsTwo:"",pidsLast:""}},created:function(){this.initTable()},mounted:function(){},methods:{initTable:function(){var e=this;i().then((function(t){e.resourceData=t.data.menus}))},addRow:function(){var e={key:"",value:""};this.meta.push(e)},cutRow:function(e){this.meta.splice(e,1)},getID:function(e){this.pidsTwo=e.slice(-1)[0]},getIDlast:function(e){this.pidsLast=e.slice(-1)[0]},savePre:function(){var e=this,t={};this.meta.forEach((function(e){t[e.key]=e.value})),this.form.meta=JSON.stringify(t),1===this.radio&&(this.form.name=this.form.title,this.form.icon="el-icon-menu",this.form.type=1,this.form.level=0,this.form.pid="0"),2===this.radio&&(this.form.name=this.form.title,this.form.icon="el-icon-menu",this.form.type=1,this.form.level=1,this.form.pid=this.pidsTwo),3===this.radio&&(this.form.type=2,this.form.pid=this.pidsLast),s(this.form).then((function(t){var l=t.success,a=t.message;l?(c["Message"].success("保存成功"),e.dialogVisible=!1):c["Message"].error(a)}))},resetMenus:function(){var e=this;n(this.resourceData).then((function(t){var l=t.success,a=t.message;l?(c["Message"].success("初始化成功"),e.dialogVisibleTwo=!1):c["Message"].error(a)}))}}},u=m,f=(l("b47c"),l("2877")),d=Object(f["a"])(u,a,o,!1,null,"73c28667",null);t["default"]=d.exports}}]);