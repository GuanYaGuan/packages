(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50ed43c1"],{"0c6d":function(e,t,s){"use strict";s("d3b7");var r,a=s("bc3a"),o=s.n(a),n=s("5c96"),i=s("4360"),l=s("5fc1"),c=void 0;r="http://leju.bufan.cloud";var d=o.a.create({baseURL:r,timeout:5e3});d.interceptors.request.use((function(e){return Object(l["a"])()&&(e.headers["token"]=Object(l["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),d.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(n["Message"])({message:t.message||"Error",type:"error",duration:5e3}),20002===t.code&&(Object(l["c"])(),Object(l["d"])(),c.$router.push("/login")),50008!==t.code&&50012!==t.code&&50014!==t.code||n["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){i["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(n["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=d},"29fb":function(e,t,s){},8298:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("el-card",{attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("新增")])],1),s("el-dialog",{attrs:{title:"地址详情",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"form",attrs:{rules:e.rule,model:e.form,"label-width":"100px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"发货地址",prop:"addressName"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入发货地址"},model:{value:e.form.addressName,callback:function(t){e.$set(e.form,"addressName",t)},expression:"form.addressName"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"发货人姓名"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入发货人姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"发货人手机号",prop:"phone"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入发货人手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮政编码"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入邮政编码"},model:{value:e.form.postCode,callback:function(t){e.$set(e.form,"postCode",t)},expression:"form.postCode"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"收货地址"}},[s("div",{attrs:{id:"app"}},[s("el-cascader",{attrs:{size:"large",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)])],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"详细地址"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入详细地址"},model:{value:e.form.detailAddress,callback:function(t){e.$set(e.form,"detailAddress",t)},expression:"form.detailAddress"}})],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e.isshow?s("el-button",{attrs:{type:"primary"},on:{click:e.sureForm}},[e._v("确 定")]):e._e(),e.isshow?e._e():s("el-button",{attrs:{type:"primary"},on:{click:e.uploadForm}},[e._v("更 新")])],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[s("el-table-column",{attrs:{align:"center",type:"index",label:"#"}}),s("el-table-column",{attrs:{prop:"addressName",label:"地址名称",align:"center"}}),s("el-table-column",{attrs:{align:"center",label:"默认发货地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 默认发货地址:"),s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(s){return e.sendOne(t.row.id)}},model:{value:t.row.sendStatus,callback:function(s){e.$set(t.row,"sendStatus",s)},expression:"scope.row.sendStatus"}})]}}])}),s("el-table-column",{attrs:{prop:"name",label:"收货人姓名",align:"center"}}),s("el-table-column",{attrs:{prop:"phone",label:"收货人电话",align:"center"}}),s("el-table-column",{attrs:{prop:"address",label:"收货人地址",align:"center"}}),s("el-table-column",{attrs:{align:"center",label:"默认收货地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 默认收货地址:"),s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(s){return e.receive(t.row.id)}},model:{value:t.row.receiveStatus,callback:function(s){e.$set(t.row,"receiveStatus",s)},expression:"scope.row.receiveStatus"}})]}}])}),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(s){return e.edit(t.row.id)}}},[e._v("编辑")]),s("el-button",{staticStyle:{color:"#f00","margin-left":"20px"},attrs:{type:"text",size:"small"},on:{click:function(s){return e.del(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)},a=[],o=(s("ac1f"),s("00b4"),s("d3b7"),s("159b"),s("0c6d"));function n(){return Object(o["a"])({url:"/lejuAdmin/companyAddress/addressList"})}function i(e){return Object(o["a"])({url:"/lejuAdmin/companyAddress/save",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/lejuAdmin/companyAddress/".concat(e),method:"delete"})}function c(e){return Object(o["a"])({url:"/lejuAdmin/companyAddress/".concat(e)})}function d(e){return Object(o["a"])({url:"/lejuAdmin/companyAddress/update",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/lejuAdmin/companyAddress/setReceiveOne",method:"post",data:e})}function m(e){return Object(o["a"])({url:"/lejuAdmin/companyAddress/setSendOne",method:"post",data:e})}var f=s("ef6c"),p=s("5c96"),b={data:function(){var e=this,t=function(t,s,r){if(""===s)r(new Error("请输入手机号码"));else{var a=/^[1][3,5,7,8][0-9]{9}$/;if(!a.test(e.form.phone))return r(new Error("请输入正确的手机号码"));r()}};return{isshow:!0,tableData:[],dialogVisible:!1,form:{province:"",city:"",region:"",receiveStatus:0,sendStatus:0,cityCode:""},options:f["regionDataPlus"],selectedOptions:[],rule:{addressName:[{required:!0,message:"请输入发货地址",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],phone:[{validator:t,trigger:"blur"}]}}},created:function(){this.initAddressList()},mounted:function(){},methods:{add:function(){this.isshow=!0,this.form={},this.selectedOptions=[],this.dialogVisible=!0},initAddressList:function(){var e=this;n().then((function(t){var s=t.data;s.items.forEach((function(e){e.address=e.province+e.city+e.detailAddress})),e.tableData=s.items}))},sureForm:function(){var e=this;i(this.form).then((function(t){var s=t.success,r=t.message;s?(p["Message"].success("新增成功"),e.dialogVisible=!1,e.initAddressList()):p["Message"].error(r)}))},handleChange:function(e){this.form.cityCode=e[0]+e[1]+e[2],this.form.province=f["CodeToText"][e[0]],this.form.city=f["CodeToText"][e[1]],this.form.region=f["CodeToText"][e[2]]},del:function(e){var t=this;l(e).then((function(e){var s=e.success,r=e.message;s?(p["Message"].success("删除成功"),t.initAddressList()):p["Message"].error(r)}))},edit:function(e){var t=this;this.isshow=!1,c(e).then((function(e){var s=e.data,r=e.success;r&&(t.selectedOptions=[],t.form=s.address,t.selectedOptions.push(f["TextToCode"][s.address.province].code),t.selectedOptions.push(f["TextToCode"][s.address.province][s.address.city].code),t.selectedOptions.push(f["TextToCode"][s.address.province][s.address.city][s.address.region].code),t.dialogVisible=!0)}))},uploadForm:function(){var e=this;d(this.form).then((function(t){var s=t.success,r=t.message;s?(p["Message"].success("更新成功"),e.dialogVisible=!1,e.initAddressList()):p["Message"].error(r)}))},receive:function(e){var t=this;u({id:e,receiveStatus:1}).then((function(e){var s=e.success,r=e.message;s?(p["Message"].success("状态更改成功"),t.dialogVisible=!1,t.initAddressList()):p["Message"].error(r)}))},sendOne:function(e){var t=this;m({id:e,sendStatus:1}).then((function(e){var s=e.success,r=e.message;s?(p["Message"].success("状态更改成功"),t.dialogVisible=!1,t.initAddressList()):p["Message"].error(r)}))}}},h=b,g=(s("88f6"),s("2877")),v=Object(g["a"])(h,r,a,!1,null,"5cb1cfde",null);t["default"]=v.exports},"88f6":function(e,t,s){"use strict";s("29fb")}}]);