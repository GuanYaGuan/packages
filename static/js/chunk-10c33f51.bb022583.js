(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10c33f51"],{"0c6d":function(e,t,a){"use strict";a("d3b7");var s,r=a("bc3a"),n=a.n(r),i=a("5c96"),o=a("4360"),c=a("5fc1"),u=void 0;s="http://leju.bufan.cloud";var l=n.a.create({baseURL:s,timeout:5e3});l.interceptors.request.use((function(e){return Object(c["a"])()&&(e.headers["token"]=Object(c["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),l.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(i["Message"])({message:t.message||"Error",type:"error",duration:5e3}),20002===t.code&&(Object(c["c"])(),Object(c["d"])(),u.$router.push("/login")),50008!==t.code&&50012!==t.code&&50014!==t.code||i["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=l},"179d":function(e,t,a){"use strict";a("c6da")},"1b62":function(e,t,a){"use strict";var s=a("5fc1");t["a"]={data:function(){return{page:{currentPage:1,size:10,pageSizes:[10,15,20,25],total:0},uploadfilesOss:"/lejuAdmin/material/uploadFileOss"}},computed:{token:function(){return{token:Object(s["a"])()}}}}},"80f9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-upload",{ref:"upload",attrs:{action:"/lejuAdmin/material/uploadFileOssSave","on-success":e.uploadFileOssSuccess,headers:e.token,"before-upload":e.uploadCoverimg}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),a("el-row",{attrs:{gutter:20}},e._l(e.materialdata,(function(t){return a("el-col",{key:t.id,staticStyle:{width:"20%"}},[a("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v(" 创建时间:"+e._s(t.createTime)+" ")]),a("el-image",{staticStyle:{width:"220px",height:"250px"},attrs:{src:t.ossUrl,"preview-src-list":e.previewListImage}}),a("el-button",{staticStyle:{"margin-top":"20px","margin-left":"75%"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.delImage(t.id)}}},[e._v("删除")])],1)],1)})),1),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.pageSizes,"page-size":e.page.size,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},r=[],n=(a("d81d"),a("ac1f"),a("00b4"),a("5c96")),i=(a("99af"),a("0c6d"));function o(e,t){return Object(i["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(e,"/").concat(t)})}function c(e){return Object(i["a"])({url:"/lejuAdmin/material/delMaterial/".concat(e),method:"delete"})}var u=a("1b62"),l={mixins:[u["a"]],data:function(){return{materialdata:[],previewListImage:[]}},created:function(){this.page.currentPage=1,this.initList()},mounted:function(){},methods:{initList:function(){var e=this;o(this.page.currentPage,this.page.size).then((function(t){var a=t.data,s=t.success,r=t.message;s?(e.materialdata=a.rows,e.page.total=a.total,e.previewListImage=a.rows.map((function(e){return e.ossUrl}))):n["Message"].error(r)}))},uploadFileOssSuccess:function(e){console.log(e);var t=e.message,a=e.success;a?(n["Message"].success("上传成功"),this.$refs.upload.clearFiles(),this.initList()):n["Message"].error(t)},handleSizeChange:function(e){this.page.size=e,this.page.currentPage=1,this.initList()},handleCurrentChange:function(e){this.page.currentPage=e,this.initList()},uploadCoverimg:function(e){var t=/^image\/(png|jpg)$/,a=t.test(e.type),s=e.size/1024<500;return a||n["Message"].error("请按照格式上传图片"),s||n["Message"].error("上传头像图片大小不能超过 500kb!"),a&&s},delImage:function(e){var t=this;c(e).then((function(e){var a=e.success,s=e.message;a?(n["Message"].success("删除成功"),t.initList()):n["Message"].error(s)}))}}},d=l,g=(a("179d"),a("2877")),p=Object(g["a"])(d,s,r,!1,null,"2b81ef26",null);t["default"]=p.exports},c6da:function(e,t,a){}}]);