(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccca1828"],{"0c6d":function(t,e,a){"use strict";a("d3b7");var n,s=a("bc3a"),o=a.n(s),r=a("5c96"),l=a("4360"),c=a("5fc1"),i=void 0;n="http://leju.bufan.cloud";var u=o.a.create({baseURL:n,timeout:5e3});u.interceptors.request.use((function(t){return Object(c["a"])()&&(t.headers["token"]=Object(c["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),u.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(r["Message"])({message:e.message||"Error",type:"error",duration:5e3}),20002===e.code&&(Object(c["c"])(),Object(c["d"])(),i.$router.push("/login")),50008!==e.code&&50012!==e.code&&50014!==e.code||r["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){l["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(r["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=u},"1b62":function(t,e,a){"use strict";var n=a("5fc1");e["a"]={data:function(){return{page:{currentPage:1,size:10,pageSizes:[10,15,20,25],total:0},uploadfilesOss:"/lejuAdmin/material/uploadFileOss"}},computed:{token:function(){return{token:Object(n["a"])()}}}}},"43fc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"content"},[a("el-collapse",[a("el-collapse-item",{attrs:{name:"",title:"商品管理介绍"}},[a("div",{staticStyle:{"margin-left":"40px"}},[t._v(" 商品管理模块可以对客户端的商品进行增删改查等相关操作,来控制客户端商品的列表展示和商品详情 ")])])],1)],1),a("div",{staticClass:"other-box"},[a("div",{staticClass:"content"},[a("el-collapse",[a("el-collapse-item",{attrs:{name:"",title:"条件查询"}},[a("div",{staticStyle:{"margin-left":"40px"}},[a("el-form",{attrs:{model:t.form,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称/模糊查询"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商品货号"}},[a("el-input",{attrs:{placeholder:"商品货号"},model:{value:t.form.productSn,callback:function(e){t.$set(t.form,"productSn",e)},expression:"form.productSn"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.brandId,callback:function(e){t.$set(t.form,"brandId",e)},expression:"form.brandId"}},t._l(t.brandData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"上架状态"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.form.publishStatus,callback:function(e){t.$set(t.form,"publishStatus",e)},expression:"form.publishStatus"}},[a("el-option",{attrs:{label:"下架",value:0}}),a("el-option",{attrs:{label:"上架",value:1}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.form.verifyStatus,callback:function(e){t.$set(t.form,"verifyStatus",e)},expression:"form.verifyStatus"}},[a("el-option",{attrs:{label:"未审核",value:0}}),a("el-option",{attrs:{label:"审核通过",value:1}})],1)],1)],1),a("el-col",{attrs:{span:6,offset:12}},[a("el-form-item",[a("el-button",{attrs:{size:"small"}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("搜索")])],1)],1),a("el-col",{attrs:{span:6,offset:12}},[a("el-form-item",[a("el-button",{attrs:{size:"small"}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("搜索")])],1)],1)],1)],1)],1)])],1)],1)]),a("el-card",{staticClass:"table-box",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.add}},[t._v("新增")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.excel}},[t._v("导出Excel表格")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"icon",label:"品牌图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.pic,alt:"",width:"100",height:"100"}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center",width:"250"}}),a("el-table-column",{attrs:{align:"center",label:"商品价格",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("原价:"+t._s(e.row.originalPrice)+"￥")]),a("div",[t._v("现价:"+t._s(e.row.price)+"￥")])]}}])}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center"}}),a("el-table-column",{attrs:{label:"标签",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 最新:"),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changeNewStatus(e.row)}},model:{value:e.row.newStatus,callback:function(a){t.$set(e.row,"newStatus",a)},expression:"scope.row.newStatus"}}),t._v(" 推荐:"),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changerecommendStatus(e.row)}},model:{value:e.row.recommendStatus,callback:function(a){t.$set(e.row,"recommendStatus",a)},expression:"scope.row.recommendStatus"}})]}}])}),a("el-table-column",{attrs:{label:"标签2",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 发布:"),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changepublishStatus(e.row)}},model:{value:e.row.publishStatus,callback:function(a){t.$set(e.row,"publishStatus",a)},expression:"scope.row.publishStatus"}}),t._v(" 审核:"),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changeverifyStatus(e.row)}},model:{value:e.row.verifyStatus,callback:function(a){t.$set(e.row,"verifyStatus",a)},expression:"scope.row.verifyStatus"}})]}}])}),a("el-table-column",{attrs:{label:"sku",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.openDiaglo(e.row.id)}}},[t._v("编辑sku")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"重量",prop:"weight"}}),a("el-table-column",{attrs:{align:"center",label:"排序",prop:"sort"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(a){return t.edit(e.row.id)}}},[t._v("编辑")]),a("el-button",{staticStyle:{color:"#f00","margin-left":"20px"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"SKU列表",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,offset:20}},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"mini",type:"primary"},on:{click:t.addSku}},[t._v("新增")])],1)],1),a("el-table",{attrs:{data:t.skuTableData,border:"",stripe:""}},[a("el-table-column",{attrs:{fixed:"",label:"#",type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{label:"图片",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/lejuAdmin/material/uploadFileOss",headers:t.token,"show-file-list":!1,"on-success":function(a){return t.handleAvatarSuccess(a.data.fileUrl,e.$index)}}},[e.row.pic?a("img",{staticClass:"avatar",attrs:{width:"100",height:"100 ",src:e.row.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]}}])}),a("el-table-column",{attrs:{label:"颜色",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.spData[0].value,callback:function(a){t.$set(e.row.spData[0],"value",a)},expression:"scope.row.spData[0].value"}})]}}])}),a("el-table-column",{attrs:{label:"大小",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.spData[1].value,callback:function(a){t.$set(e.row.spData[1],"value",a)},expression:"scope.row.spData[1].value"}})]}}])}),a("el-table-column",{attrs:{label:"库存",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),a("el-table-column",{attrs:{label:"预警库存",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.lowStock,callback:function(a){t.$set(e.row,"lowStock",a)},expression:"scope.row.lowStock"}})]}}])}),a("el-table-column",{attrs:{label:"锁定库存",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.lockStock,callback:function(a){t.$set(e.row,"lockStock",a)},expression:"scope.row.lockStock"}})]}}])}),a("el-table-column",{attrs:{label:"sku编码",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),a("el-table-column",{attrs:{label:"价格",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"销量",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.sale,callback:function(a){t.$set(e.row,"sale",a)},expression:"scope.row.sale"}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"#f00","margin-left":"20px"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.delSku(e.row.id)}}},[t._v("删除")]),t.addShow?t._e():a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.changeEdit(e.row)}}},[t._v("修改编辑")]),t.addShow?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.saveSku(e.$index)}}},[t._v("保存")]):t._e()]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.pageSizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v("> ")],1)},s=[],o=(a("e9c4"),a("d3b7"),a("159b"),a("3ca3"),a("ddb0"),a("d81d"),a("6cd9")),r=a("1b62"),l=a("5c96"),c={mixins:[r["a"]],data:function(){return{dialogVisible:!1,form:{},brandData:[],tableData:[],skuTableData:[],skuId:"",addShow:!1}},created:function(){var t=this;this.initbrandList(),Object(o["e"])().then((function(e){t.brandData=e.data.items}))},mounted:function(){},methods:{initbrandList:function(){var t=this,e={};for(var a in this.form)this.form[a]&&(e[a]=this.form[a]);Object(o["g"])(this.page.currentPage,this.page.size,e).then((function(e){var a=e.success,n=e.data,s=e.message;a?(t.tableData=n.rows,t.page.total=n.total):l["Message"].error(s)}))},add:function(){this.$router.push("/goods/addGoods")},addSku:function(){var t=[{key:"",value:""},{key:"",value:""}],e={lockStock:"",lowStock:"",pic:"",price:"",promotionPrice:"",sale:"",skuCode:"",spData:t,stock:"",modifyTime:"",createTime:""};this.skuTableData.push(e),this.addShow=!0},saveSku:function(t){var e=this;this.skuTableData[t].spData=JSON.stringify(this.skuTableData[t].spData),Object(o["b"])(this.skuTableData[t]).then((function(t){var a=t.success,n=t.message;a?(l["Message"].success("添加成功"),e.initSku(),e.addShow=!1):l["Message"].error(n)}))},initSku:function(){var t=this;Object(o["f"])(this.skuId).then((function(e){e.data.skus.forEach((function(t){t.spData=JSON.parse(t.spData)})),t.skuTableData=e.data.skus}))},openDiaglo:function(t){this.skuId=t,this.initSku(),this.dialogVisible=!0,this.addShow=!1},handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.initbrandList()},handleCurrentChange:function(t){this.page.currentPage=t,this.initbrandList()},del:function(t){var e=this;Object(o["d"])(t).then((function(t){var a=t.success,n=t.message;a?(l["Message"].success("删除成功"),e.initbrandList()):l["Message"].error(n)}))},edit:function(t){this.$router.push({path:"/goods/addGoods",query:{id:t}})},changeNewStatus:function(t){Object(o["h"])({productId:t.id,status:t.newStatus}).then((function(t){t.success?l["Message"].success("最新状态修改成功"):l["Message"].error(t.message)}))},changerecommendStatus:function(t){Object(o["j"])({productId:t.id,status:t.newStatus}).then((function(t){t.success?l["Message"].success("推荐状态修改成功"):l["Message"].error(t.message)}))},changepublishStatus:function(t){Object(o["i"])({productId:t.id,status:t.newStatus}).then((function(t){t.success?l["Message"].success("发布状态修改成功"):l["Message"].error(t.message)}))},changeverifyStatus:function(t){Object(o["k"])({productId:t.id,status:t.newStatus}).then((function(t){t.success?l["Message"].success("审核状态修改成功"):l["Message"].error(t.message)}))},delSku:function(t){var e=this;Object(o["c"])(t).then((function(t){t.success?(l["Message"].success("删除成功"),e.initSku()):l["Message"].error(t.message)}))},changeEdit:function(t){var e=this;delete t.createTime,delete t.promotionPrice,t.spData=JSON.stringify(t.spData),Object(o["l"])(t).then((function(t){t.success?(l["Message"].success("修改成功"),e.initSku()):l["Message"].error(t.message)}))},excel:function(){var t=this;Promise.all([a.e("chunk-cd409754"),a.e("chunk-3d3606e8"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(e){var a=["商品名称","商品价格","商品类别","重量","排序"],n=["name","price","productCategoryName","weight","sort"],s=t.tableData,o=t.formatJson(n,s);e.export_json_to_excel({header:a,data:o,filename:"excel-list",autoWidth:!0,bookType:"xlsx"})}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?parseTime(e[t]):e[t]}))}))},handleAvatarSuccess:function(t,e){this.skuTableData[e].pic=t}}},i=c,u=(a("82c6"),a("2877")),d=Object(u["a"])(i,n,s,!1,null,"cafbe030",null);e["default"]=d.exports},"6cd9":function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"g",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"l",(function(){return i})),a.d(e,"b",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"j",(function(){return f})),a.d(e,"i",(function(){return p})),a.d(e,"k",(function(){return m})),a.d(e,"a",(function(){return b}));a("99af");var n=a("0c6d");function s(){return Object(n["a"])({url:"/lejuAdmin/brand/findAllBrand"})}function o(t){return Object(n["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t)})}function r(t,e,a){return Object(n["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:a})}function l(t){return Object(n["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"delete"})}function c(t){return Object(n["a"])({url:"/lejuAdmin/sku/delSku/".concat(t),method:"delete"})}function i(t){return Object(n["a"])({url:"/lejuAdmin/sku/updateSkuInfo",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/lejuAdmin/sku/addProductSkus",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}},"82c6":function(t,e,a){"use strict";a("ae5f")},ae5f:function(t,e,a){}}]);